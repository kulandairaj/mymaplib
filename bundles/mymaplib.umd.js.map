{"version":3,"file":"mymaplib.umd.js.map","sources":["ng://mymaplib/lib/mymaplib.service.ts","ng://mymaplib/lib/mymaplib.component.ts","ng://mymaplib/lib/mymaplib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MymaplibService {\n\n  constructor() { }\n}\n","import { ViewContainerRef, Component, ElementRef, OnInit, ViewChild, Input, Output, EventEmitter } from '@angular/core';\n\ndeclare const Microsoft: any;\n\n@Component({\n  selector: 'my-map',\n  template: `\n  <div id='myMap' style='width: 100vw; height: 100vh;'></div>\n  `,\n  styles: []\n})\nexport class MymaplibComponent implements OnInit {\n  @Input() ticketList: any = []\n  @Output() ticketClick: EventEmitter<any> = new EventEmitter<any>();\n\n  title = 'myMapApp';\n  base64Image = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAcBAMAAABmCgnjAAAAFVBMVEVHcEz///8aGhpsuy2s4oDRuPMaADiElDMGAAAAAXRSTlMAQObYZgAAAFNJREFUeF7FkLENgDAQA52GGiIxwD8bPBsgBmD/aXCs6JMNcpWtk1wYx8SO6gO2N3kWtDuJBc39UtYTPEc69BIpTVqLgjJOpS7tQ1I5NyiGia2rHyT7OTg7xhBoAAAAAElFTkSuQmCC';\n  @ViewChild('mapElement') someInput: ElementRef;\n  myMap = document.querySelector('#myMap');\n\n  ngOnInit() {\n    if (document.readyState != 'complete') {\n      document.onreadystatechange = () => {\n        if (document.readyState === 'complete') {\n          this.loadMapView();\n        } else {\n          this.ngOnInit();\n        }\n      }\n    } else {\n      if (document.readyState === 'complete') {\n        this.loadMapView();\n      }\n    }\n\n\n  }\n\n  loadMapView() {\n    var that = this;\n    var map = new Microsoft.Maps.Map(document.getElementById('myMap'), {\n      /* No need to set credentials if already passed in URL */\n      center: new Microsoft.Maps.Location(40.3969926, -74.1408029),\n      credentials: 'AnxpS-32kYvBzjQ5pbZcnDz17oKBa1Bq2HRwHANoNpHs3Z25NDvqbhcqJZyDoYMj',\n      zoom: 12,\n      liteMode: true,\n      enableClickableLogo: false,\n      showLogo: false,\n      showTermsLink: false,\n      showMapTypeSelector: false,\n      showTrafficButton: true,\n      enableSearchLogo: false,\n      showCopyright: false\n    });\n    var infobox = new Microsoft.Maps.Infobox(map.getCenter(), {\n      visible: false\n    });\n    infobox.setMap(map);    \n\n    this.ticketList.forEach(element => {\n      var pushpin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(element.lattitude, element.longititude), { icon: this.base64Image, text: element.severity });\n      pushpin.metadata = element;\n      map.entities.push(pushpin);\n\n      Microsoft.Maps.Events.addHandler(pushpin, 'click', (args) => {\n        \n        infobox.setOptions({\n          showPointer: true,\n          location: args.target.getLocation(),\n          visible: true,\n          showCloseButton: true,\n          offset: new Microsoft.Maps.Point(0, 20),\n          title: 'Ticket No: ' + args.target.metadata.ticketNo, \n          description: args.target.metadata.description, \n          //htmlContent: '<div class = \"infy\" style= \"background-color: white;border: 1px solid lightgray; width:560px;height:50px;\"></div>'\n        });\n        console.log('ticket pin clicked');\n        pinClicked(args.target.metadata)\n    });\n\n  });\n    //var pushpin = new Microsoft.Maps.Pushpin(map.getCenter(), { icon: this.base64Image, text: 'A', title: 'Title', subTitle: 'Subtitle' });\n\n    // var pushpin = new Microsoft.Maps.Pushpin(map.getCenter(), { icon: this.base64Image, anchor: new Microsoft.Maps.Point(12, 28) });\n    function pinClicked(parms){\n      console.log('emit',that);\n      that.ticketClick.emit(parms);\n    }\n  }\n\n  \n\n}\n","import { NgModule } from '@angular/core';\nimport { MymaplibComponent } from './mymaplib.component';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [MymaplibComponent],\n  exports: [MymaplibComponent]\n})\nexport class MymaplibModule { }\n"],"names":["Injectable","EventEmitter","Component","Input","Output","ViewChild","NgModule"],"mappings":"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"}
